Hai cá»¥m tá»«:

"Sá»‘ thá»±c dáº¥u pháº©y Ä‘á»™ng chÃ­nh xÃ¡c Ä‘Æ¡n" (single-precision floating point)

"Sá»‘ thá»±c chÃ­nh xÃ¡c kÃ©p" (double-precision floating point)

lÃ  thuáº­t ngá»¯ dÃ¹ng Ä‘á»ƒ mÃ´ táº£ cÃ¡ch mÃ¡y tÃ­nh lÆ°u trá»¯ sá»‘ thá»±c (sá»‘ cÃ³ pháº§n tháº­p phÃ¢n) theo chuáº©n IEEE 754, vÃ  sá»± khÃ¡c nhau chá»§ yáº¿u náº±m á»Ÿ Ä‘á»™ chÃ­nh xÃ¡c vÃ  dung lÆ°á»£ng bá»™ nhá»› sá»­ dá»¥ng.

âœ… 1. Sá»‘ thá»±c dáº¥u pháº©y Ä‘á»™ng chÃ­nh xÃ¡c Ä‘Æ¡n â€“ float
Gá»i lÃ  single precision (Ä‘Æ¡n chÃ­nh xÃ¡c).

DÃ¹ng 32 bit (4 byte) Ä‘á»ƒ lÆ°u trá»¯:

1 bit: dáº¥u (+/-)

8 bit: pháº§n mÅ© (exponent)

23 bit: pháº§n trá»‹ (mantissa)

â¡ï¸ Äiá»u nÃ y giÃºp float cÃ³ thá»ƒ lÆ°u trá»¯ sá»‘ thá»±c tÆ°Æ¡ng Ä‘á»‘i nhá» hoáº·c lá»›n, nhÆ°ng chá»‰ chÃ­nh xÃ¡c khoáº£ng 6-7 chá»¯ sá»‘ tháº­p phÃ¢n.

ğŸ§  VÃ­ dá»¥:

float x = 3.1415926f;
System.out.println(x); // In ra: 3.1415925 (bá»‹ trÃ²n)
âœ… 2. Sá»‘ thá»±c chÃ­nh xÃ¡c kÃ©p â€“ double
Gá»i lÃ  double precision (chÃ­nh xÃ¡c kÃ©p).

DÃ¹ng 64 bit (8 byte):

1 bit: dáº¥u

11 bit: pháº§n mÅ©

52 bit: pháº§n trá»‹

â¡ï¸ double lÆ°u Ä‘Æ°á»£c cÃ¡c sá»‘ ráº¥t lá»›n hoáº·c ráº¥t nhá», vÃ  cÃ³ Ä‘á»™ chÃ­nh xÃ¡c cao hÆ¡n float ráº¥t nhiá»u (khoáº£ng 15 chá»¯ sá»‘ tháº­p phÃ¢n).

ğŸ§  VÃ­ dá»¥:

double y = 3.141592653589793;
System.out.println(y); // In ra: 3.141592653589793 (Ä‘áº§y Ä‘á»§)
ğŸ“Š So sÃ¡nh nhanh:
TÃ­nh cháº¥t	float	double
KÃ­ch thÆ°á»›c	32 bit	64 bit
Äá»™ chÃ­nh xÃ¡c	~7 chá»¯ sá»‘	~15 chá»¯ sá»‘
DÃ¹ng cho	á»¨ng dá»¥ng nháº¹, tiáº¿t kiá»‡m bá»™ nhá»›	TÃ­nh toÃ¡n yÃªu cáº§u Ä‘á»™ chÃ­nh xÃ¡c cao
Háº­u tá»‘	f hoáº·c F (3.14f)	KhÃ´ng cáº§n háº­u tá»‘ (3.14)
Sai sá»‘	Cao hÆ¡n	Ãt hÆ¡n
âš ï¸ LÆ°u Ã½ quan trá»ng:
Khi lÃ m viá»‡c vá»›i tÃ i chÃ­nh, tiá»n tá»‡â€¦ trÃ¡nh dÃ¹ng float/double vÃ¬ sai sá»‘ nhá»‹ phÃ¢n, nÃªn dÃ¹ng kiá»ƒu BigDecimal (Java) hoáº·c decimal (C#).

Náº¿u khÃ´ng cÃ³ lÃ½ do Ä‘áº·c biá»‡t, nÃªn dÃ¹ng double thay vÃ¬ float vÃ¬ an toÃ n hÆ¡n.

-----------------------------------------------------------------------------------------------------------------

ğŸ”¢ 1. Dáº¥u pháº©y Ä‘á»™ng lÃ  gÃ¬?
"Dáº¥u pháº©y Ä‘á»™ng" (floating point) lÃ  cÃ¡ch mÃ¡y tÃ­nh lÆ°u trá»¯ sá»‘ thá»±c báº±ng cÃ¡ch tÃ¡ch pháº§n trá»‹ vÃ  pháº§n mÅ©, tÆ°Æ¡ng tá»± nhÆ° cÃ¡ch viáº¿t khoa há»c:

VÃ­ dá»¥:
Sá»‘ 12345.678 cÃ³ thá»ƒ viáº¿t láº¡i dÆ°á»›i dáº¡ng:
1.2345678 Ã— 10â´

Trong mÃ¡y tÃ­nh, sá»‘ nÃ y Ä‘Æ°á»£c lÆ°u nhÆ°:

Pháº§n trá»‹: 1.2345678

Pháº§n mÅ©: 4

â¡ï¸ "Dáº¥u pháº©y Ä‘á»™ng" nghÄ©a lÃ  vá»‹ trÃ­ dáº¥u pháº©y tháº­p phÃ¢n khÃ´ng cá»‘ Ä‘á»‹nh, nÃ³ "di chuyá»ƒn" (Ä‘á»™ng) theo pháº§n mÅ©.

ğŸ§® 2. Pháº§n trá»‹ (Mantissa) vÃ  pháº§n mÅ© (Exponent)
ğŸ“Œ Pháº§n trá»‹ (mantissa / significand)
LÃ  pháº§n chá»©a cÃ¡c chá»¯ sá»‘ chÃ­nh xÃ¡c cá»§a sá»‘.

VÃ­ dá»¥: Trong 6.022 Ã— 10Â²Â³, thÃ¬ 6.022 lÃ  pháº§n trá»‹.

ğŸ“Œ Pháº§n mÅ© (exponent)
Chá»‰ Ä‘á»‹nh sá»‘ láº§n dá»‹ch chuyá»ƒn dáº¥u pháº©y (trÃ¡i hoáº·c pháº£i).

VÃ­ dá»¥: 10Â²Â³ â†’ sá»‘ pháº£i Ä‘Æ°á»£c nhÃ¢n vá»›i 10 mÅ© 23.

ğŸ–¥ VÃ­ dá»¥ minh há»a float/double:
Sá»‘ thá»±c 123.45 lÆ°u theo dáº¥u pháº©y Ä‘á»™ng cÃ³ thá»ƒ Ä‘Æ°á»£c mÃ£ hÃ³a thÃ nh:

bash
Sao chÃ©p
Chá»‰nh sá»­a
= 1.2345 Ã— 10Â²
â†’ pháº§n trá»‹ = 1.2345
â†’ pháº§n mÅ© = 2
Khi lÆ°u trong float (32 bit), bit sáº½ chia ra:

1 bit dáº¥u

8 bit pháº§n mÅ©

23 bit pháº§n trá»‹

ğŸ’° 3. BigDecimal trong Java â€“ Sá»‘ thá»±c chÃ­nh xÃ¡c tuyá»‡t Ä‘á»‘i
âœ”ï¸ DÃ¹ng khi nÃ o?
Khi báº¡n cáº§n Ä‘á»™ chÃ­nh xÃ¡c tuyá»‡t Ä‘á»‘i, vÃ­ dá»¥:

TÃ­nh tiá»n, lÃ£i suáº¥t, thuáº¿, tÃ i chÃ­nh

So sÃ¡nh giÃ¡ trá»‹ tháº­p phÃ¢n chÃ­nh xÃ¡c (vÃ­ dá»¥: 0.1 + 0.2 == 0.3 khÃ´ng Ä‘Ãºng vá»›i float)

âŒ LÃ½ do khÃ´ng dÃ¹ng float hoáº·c double trong tÃ i chÃ­nh:
java
Sao chÃ©p
Chá»‰nh sá»­a
System.out.println(0.1 + 0.2); // 0.30000000000000004 âŒ
âœ… CÃ¡ch dÃ¹ng BigDecimal:
java
Sao chÃ©p
Chá»‰nh sá»­a
import java.math.BigDecimal;

public class Main {
    public static void main(String[] args) {
        BigDecimal a = new BigDecimal("0.1");
        BigDecimal b = new BigDecimal("0.2");
        BigDecimal c = a.add(b);
        System.out.println(c); // âœ… 0.3
    }
}
ğŸ”‘ LÆ°u Ã½: LuÃ´n truyá»n vÃ o String, khÃ´ng dÃ¹ng new BigDecimal(0.1) vÃ¬ nÃ³ sáº½ dÃ­nh sai sá»‘ giá»‘ng double.

-----------------------------------------------------------------------------------------------------------------

ğŸ§  TrÆ°á»›c háº¿t: Lá»—i cá»§a float vÃ  double Ä‘áº¿n tá»« Ä‘Ã¢u?
Khi mÃ¡y tÃ­nh lÆ°u sá»‘ 0.1 báº±ng double, nÃ³ pháº£i chuyá»ƒn sang nhá»‹ phÃ¢n (binary floating-point):

Sao chÃ©p
Chá»‰nh sá»­a
0.1 (tháº­p phÃ¢n) = 0.000110011001100... (nhá»‹ phÃ¢n vÃ´ háº¡n láº·p)
â¡ï¸ MÃ¡y tÃ­nh khÃ´ng thá»ƒ lÆ°u vÃ´ háº¡n, nÃªn nÃ³ cáº¯t bá»›t â†’ dáº«n Ä‘áº¿n sai sá»‘.

Khi cá»™ng 0.1 + 0.2:

java
Sao chÃ©p
Chá»‰nh sá»­a
System.out.println(0.1 + 0.2); // âŒ 0.30000000000000004
âœ… Váº­y BigDecimal thÃ¬ lÃ m sao?
ğŸ” 1. LÆ°u trá»¯ chÃ­nh xÃ¡c tá»«ng chá»¯ sá»‘
Khi báº¡n viáº¿t:

java
Sao chÃ©p
Chá»‰nh sá»­a
BigDecimal a = new BigDecimal("0.1");
Java khÃ´ng chuyá»ƒn "0.1" thÃ nh nhá»‹ phÃ¢n. NÃ³ sáº½:

LÆ°u 0.1 dÆ°á»›i dáº¡ng chuá»—i kÃ½ tá»±

Hoáº·c phÃ¢n tÃ­ch thÃ nh cÃ¡c pháº§n: mantissa = 1, scale = 1, nghÄ©a lÃ  1 Ã— 10â»Â¹

â¡ï¸ ChÃ­nh xÃ¡c tuyá»‡t Ä‘á»‘i: khÃ´ng lÃ m trÃ²n, khÃ´ng cáº¯t bá»›t.

ğŸ”§ 2. TÃ­nh toÃ¡n nhÆ°... báº¡n tÃ­nh tay
Khi báº¡n cá»™ng 0.1 vÃ  0.2 báº±ng tay:

markdown
Sao chÃ©p
Chá»‰nh sá»­a
  0.1
+ 0.2
-----
  0.3
BigDecimal cÅ©ng lÃ m nhÆ° váº­y! NÃ³:

Chuyá»ƒn sá»‘ thÃ nh chuá»—i sá»‘ nguyÃªn + scale (pháº§n tháº­p phÃ¢n)

DÃ¹ng thuáº­t toÃ¡n tÃ­nh toÃ¡n chÃ­nh xÃ¡c báº±ng sá»‘ nguyÃªn

Sau Ä‘Ã³ chia láº¡i theo scale Ä‘á»ƒ ra Ä‘Ãºng Ä‘á»‹nh dáº¡ng tháº­p phÃ¢n

â¡ï¸ KhÃ´ng cÃ³ chuyá»ƒn Ä‘á»•i qua nhá»‹ phÃ¢n â†’ khÃ´ng bao giá» sai sá»‘

ğŸ§ª 3. Minh hoáº¡ rÃµ rÃ ng:
java
Sao chÃ©p
Chá»‰nh sá»­a
BigDecimal a = new BigDecimal("0.1"); // a = 1, scale = 1
BigDecimal b = new BigDecimal("0.2"); // b = 2, scale = 1
BigDecimal c = a.add(b);              // c = 3, scale = 1
System.out.println(c);                // âœ… 0.3
Má»i thá»© Ä‘Æ°á»£c xá»­ lÃ½ theo sá»‘ nguyÃªn vÃ  scale â†’ nhÆ° báº¡n Ä‘ang lÃ m toÃ¡n trÃªn giáº¥y.

ğŸ“Œ Thá»±c táº¿: BigDecimal lÆ°u cÃ¡i gÃ¬?
BÃªn trong BigDecimal lÃ :

java
Sao chÃ©p
Chá»‰nh sá»­a
public class BigDecimal {
    private BigInteger intVal;  // Sá»‘ nguyÃªn lá»›n: vÃ­ dá»¥ "123"
    private int scale;          // Sá»‘ chá»¯ sá»‘ sau dáº¥u pháº©y: vÃ­ dá»¥ "2" â†’ thÃ nh "1.23"
}
VÃ­ dá»¥:

java
Sao chÃ©p
Chá»‰nh sá»­a
BigDecimal x = new BigDecimal("1.23");
â†’ intVal = 123
â†’ scale  = 2
â†’ Hiá»ƒn thá»‹: 1.23
â¡ï¸ ÄÆ¡n giáº£n mÃ  hiá»‡u quáº£!

âš ï¸ LÆ°u Ã½ cá»±c ká»³ quan trá»ng:
java
Sao chÃ©p
Chá»‰nh sá»­a
// Sai cÃ¡ch
BigDecimal a = new BigDecimal(0.1); // âŒ sáº½ gÃ¢y sai sá»‘
VÃ¬ 0.1 á»Ÿ Ä‘Ã¢y lÃ  double, Ä‘Ã£ bá»‹ sai ngay tá»« Ä‘áº§u.

âœ… CÃ¡ch Ä‘Ãºng:

java
Sao chÃ©p
Chá»‰nh sá»­a
BigDecimal a = new BigDecimal("0.1"); // DÃ¹ng chuá»—i

